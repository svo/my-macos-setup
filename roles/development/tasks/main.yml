- name: Install psql client
  community.general.homebrew:
    name: libpq

- name: Get psql client path
  ansible.builtin.command: brew --prefix libpq
  register: development_tools_psql_client_path
  changed_when: false

- name: Add psql to bin
  ansible.builtin.blockinfile:
    create: true
    path: ~/.zshrc
    marker: "# {mark} ANSIBLE MANAGED BLOCK FOR PSQL"
    mode: "0644"
    block: |
      export PATH="{{ development_tools_psql_client_path.stdout_lines[0] | regex_replace('^/+', '/') }}/bin:$PATH"

- name: Install Wireshark packet analyzer
  community.general.homebrew_cask:
    name: wireshark

- name: Install postman
  community.general.homebrew_cask:
    name: postman

- name: Install TablePlus database management tool
  community.general.homebrew_cask:
    name: tableplus

- name: Install dbvisualizer
  community.general.homebrew_cask:
    name: dbvisualizer

- name: Install PlantUML CLI diagramming tool
  community.general.homebrew:
    name: plantuml

- name: Install PlantUML vim plugin
  ansible.builtin.git:
    repo: https://github.com/aklt/plantuml-syntax.git
    dest: ~/.vim/bundle/plantuml-syntax
    force: true

- name: Install Semgrep static analysis for finding bugs and enforcing code standards
  community.general.homebrew:
    name: semgrep

- name: Install cloc lines of code utility
  community.general.homebrew:
    name: cloc

- name: Install scc code counter
  community.general.homebrew:
    name: scc

- name: Install tool for working with Architecture Decision Records
  community.general.homebrew:
    name: adr-tools

- name: Install HTTPie cURL wrapper
  community.general.homebrew:
    name: httpie
    state: present

- name: Install watchman
  community.general.homebrew:
    name: watchman
