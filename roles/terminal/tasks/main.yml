- name: Install bash shell
  community.general.homebrew:
    name: bash

- name: Install ohmyzsh zsh enhancement
  ansible.builtin.shell: /bin/sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
  args:
    creates: ~/.oh-my-zsh

- name: Configure ohmyzsh theme
  ansible.builtin.lineinfile:
    path: ~/.zshrc
    regexp: '^(.*)ZSH_THEME="(.*)"$'
    line: 'ZSH_THEME="gnzh"'
    backrefs: true

- name: Install zsh-completions command completion
  community.general.homebrew:
    name: zsh-completions

- name: Configure zsh-completions shell integration
  ansible.builtin.blockinfile:
    create: true
    path: ~/.zshrc
    marker: "# {mark} ANSIBLE MANAGED BLOCK (BASH_COMPLETION)"
    mode: "0644"
    block: |
      if type brew &>/dev/null; then
      FPATH=$(brew --prefix)/share/zsh-completions:$FPATH

      autoload -Uz compinit
      compinit
      fi

- name: Install thefuck command correction tool
  community.general.homebrew:
    name: thefuck

- name: Configure thefuck shell integration
  ansible.builtin.blockinfile:
    path: ~/.zshrc
    marker: "# {mark} ANSIBLE MANAGED BLOCK (thefuck)"
    block: |
      eval $(thefuck --alias)

- name: Install tmux terminal multiplexer
  community.general.homebrew:
    name: tmux

- name: Configure tmux default settings
  ansible.builtin.blockinfile:
    create: true
    path: ~/.tmux.conf
    mode: "0644"
    block: |
      bind c new-window -c "#{pane_current_path}"
      bind '"' split-window -c "#{pane_current_path}"
      bind % split-window -h -c "#{pane_current_path}"
      setw -g mode-keys vi

- name: Configure tmux auto-start in Terminal.app
  ansible.builtin.blockinfile:
    path: ~/.zshrc
    marker: "# {mark} ANSIBLE MANAGED BLOCK (tmux start)"
    block: |
      TERM=xterm &&
      if [ "$TMUX" = "" ]; then tmux; fi

- name: Install coreutils GNU utilities
  community.general.homebrew:
    name: coreutils

- name: Install gnu-sed text stream editor
  community.general.homebrew:
    name: gnu-sed

- name: Install jq command-line JSON processor
  community.general.homebrew:
    name: jq

- name: Install yq YAML query processor
  community.general.homebrew:
    name: yq

- name: Install xmlstarlet XML toolkit
  community.general.homebrew:
    name: xmlstarlet

- name: Install docutils documentation processor
  community.general.homebrew:
    name: docutils

- name: Install icdiff side-by-side diff tool
  community.general.homebrew:
    name: icdiff

- name: Install htop process monitor
  community.general.homebrew:
    name: htop

- name: Install iftop network monitor
  community.general.homebrew:
    name: iftop

- name: Install ncdu disk usage analyzer
  community.general.homebrew:
    name: ncdu

- name: Install watch command repeater
  community.general.homebrew:
    name: watch

- name: Install telnet network protocol client
  community.general.homebrew:
    name: telnet

- name: Install tcptraceroute network diagnostic tool
  community.general.homebrew:
    name: tcptraceroute

- name: Install gnuplot function plotter
  community.general.homebrew:
    name: gnuplot

- name: Install spark sparkline generator
  community.general.homebrew:
    name: spark

- name: Install topgrade upgrade manager
  community.general.homebrew:
    name: topgrade

- name: Install fortune random quote generator
  community.general.homebrew:
    name: fortune
