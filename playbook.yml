---
- name: Play for setting up my-macos-setup
  hosts: all

  pre_tasks:
    - name: Add /usr/local/sbin to path
      ansible.builtin.lineinfile:
        path: /etc/paths
        line: '/usr/local/sbin'
        insertbefore: '/usr/sbin'
      become: true

    - name: Update hostname
      ansible.builtin.hostname:
        name: "{{ ansible_user_id }}-mac"
      become: true

  roles:

    - brew
    - git
    - vim
    - java
    - node
    - ruby
    - golang
    - kotlin
    - clojure
    - flutter
    - python
    - gradle
    - maven
    - iac
    - system
    - keyboard
    - docker
    - terminal
    - security
    - android
    - semgrep
    - ai
    - media
    - design
    - internet
    - development
    - productivity
    - plantuml
    - office

  post_tasks:

    - name: Change .local ownership and permissions
      ansible.builtin.file:
        path: "{{ brew_brew_path.stdout | trim }}/share"
        owner: "{{ ansible_user_id }}"
        recurse: true
        mode: '0755'
      become: true
